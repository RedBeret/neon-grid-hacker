import{j as e,g as v,h as k,i as S}from"./shadcn-ui-vendors-BGyadPNx.js";import{r as u}from"./lucide-icons-BZusxVGo.js";import{M as C}from"./MainLayout-Dr3bHR47.js";import{a as f,u as N,T as E,b as M,c as T,d as A}from"./index-luleGUYx.js";import{B as g}from"./button-CJyLhhZk.js";const D=({onNodeClick:s})=>{const{state:r}=f(),{playSfx:t}=N(),i=r.grid,x=(a,l)=>{const b=(a-l)*30,y=(a+l)*15;return{x:b+200,y:y+50}},o=(a,l)=>{t("click"),s(a,l)},n=a=>{const{x:l,y:b}=x(a.x,a.y);let y="";switch(a.color){case"cyan":y="bg-cyber-cyan/20 border-cyber-cyan hover:bg-cyber-cyan/30";break;case"magenta":y="bg-cyber-magenta/20 border-cyber-magenta hover:bg-cyber-magenta/30";break;case"yellow":y="bg-cyber-yellow/20 border-cyber-yellow hover:bg-cyber-yellow/30";break;default:y="bg-cyber-cyan/20 border-cyber-cyan hover:bg-cyber-cyan/30"}const j=a.solved?"opacity-50":"border-glow-"+a.color;return e.jsx("button",{className:`absolute w-12 h-6 ${y} ${j} transform rotate-45 cursor-cyber transition-all duration-300 hover:scale-105`,style:{left:`${l}px`,top:`${b}px`},disabled:a.solved||r.status!=="playing",onClick:()=>o(a.x,a.y),children:e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center -rotate-45 text-xs",children:[a.type==="loop"&&e.jsx("span",{className:"animate-spin",children:"⟳"}),a.type==="conditional"&&e.jsx("span",{className:"text-glow-cyan",children:a.solved?"T":"F"}),a.type==="recursion"&&e.jsx("span",{className:"animate-pulse",children:"⦿"})]})},a.id)},m=()=>{if(!r.player||r.grid.length===0)return null;const{x:a,y:l}=x(r.player.x,r.player.y);return e.jsx("div",{className:"absolute w-6 h-6 bg-white rounded-full animate-pulse-glow z-20",style:{left:`${a+3}px`,top:`${l-6}px`,boxShadow:"0 0 10px #00eaff, 0 0 15px #00eaff"}})},h=u.useMemo(()=>!i||i.length===0?null:i.flatMap(a=>a.map(l=>n(l))),[i,r.status]);return e.jsxs("div",{className:"relative w-full h-[60vh] overflow-hidden",children:[h,m()]})},P=()=>{const{state:s}=f(),r=t=>{const i=Math.floor(t/60),x=Math.floor(t%60);return`${i.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"fixed top-0 left-0 w-full p-4 z-30 pointer-events-none",children:[e.jsxs("div",{className:"container mx-auto flex justify-between",children:[e.jsx("div",{className:"cyber-glass p-2 rounded border border-cyber-cyan/50 text-glow-cyan",children:e.jsx("div",{className:"text-cyber-cyan font-bold",children:r(s.timeRemaining)})}),e.jsx("div",{className:"cyber-glass p-2 rounded border border-cyber-magenta/50 text-glow-magenta",children:e.jsxs("div",{className:"text-cyber-magenta font-bold",children:["Score: ",Math.floor(s.score)]})})]}),e.jsx("div",{className:"fixed bottom-4 left-0 w-full flex justify-center",children:e.jsxs("div",{className:"cyber-glass p-2 rounded border border-cyber-yellow/50 text-glow-yellow flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyber-yellow text-sm",children:"Integrity:"}),e.jsx("div",{className:"w-32 h-3 bg-cyber-bg/70 border border-cyber-yellow/50",children:e.jsx("div",{className:"h-full bg-cyber-yellow/70",style:{width:`${s.player.integrity}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyber-cyan text-sm",children:"Dash:"}),e.jsx("div",{className:"w-20 h-3 bg-cyber-bg/70 border border-cyber-cyan/50",children:e.jsx("div",{className:"h-full bg-cyber-cyan/70",style:{width:s.player.canDash?"100%":`${(3-s.player.dashCooldown)/3*100}%`}})})]}),e.jsxs("div",{className:"text-cyber-magenta text-sm",children:["Combo: x",s.combo.toFixed(1)]})]})})]})},O=()=>{const{state:s,dispatch:r}=f(),{playSfx:t}=N(),i=x=>{var a,l,b;if(s.status!=="playing")return;const{x:o,y:n}=s.player;let m=o,h=n;switch(x.key.toLowerCase()){case"w":case"arrowup":h=Math.max(0,n-1);break;case"a":case"arrowleft":m=Math.max(0,o-1);break;case"s":case"arrowdown":h=Math.min(s.grid.length-1,n+1);break;case"d":case"arrowright":m=Math.min(((a=s.grid[0])==null?void 0:a.length)-1||0,o+1);break;case" ":(l=s.grid[n])!=null&&l[o]&&!s.grid[n][o].solved&&(r({type:"SOLVE_NODE",x:o,y:n}),t("solve"));break;case"shift":if(s.player.canDash){r({type:"DASH"}),t("dash");const j=[{x:0,y:-1},{x:-1,y:0},{x:0,y:1},{x:1,y:0}].filter(c=>{var w;const d=o+c.x,p=n+c.y;return d>=0&&d<((w=s.grid[0])==null?void 0:w.length)&&p>=0&&p<s.grid.length});if(j.length>0){const c=j[Math.floor(Math.random()*j.length)];r({type:"MOVE_PLAYER",x:Math.min(Math.max(0,o+c.x*2),((b=s.grid[0])==null?void 0:b.length)-1||0),y:Math.min(Math.max(0,n+c.y*2),s.grid.length-1||0)})}}break}(m!==o||h!==n)&&(r({type:"MOVE_PLAYER",x:m,y:h}),t("click"))};return u.useEffect(()=>(window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[s.status,s.player.x,s.player.y,s.player.canDash,s.grid]),e.jsxs("div",{className:"mt-4 cyber-glass p-4 rounded-md border border-cyber-cyan/50",children:[e.jsx("h2",{className:"text-cyber-cyan mb-3 text-glow-cyan",children:"Controls"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white mb-1",children:"Movement:"}),e.jsx("p",{className:"text-cyber-cyan/70",children:"WASD / Arrow Keys"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white mb-1",children:"Interact:"}),e.jsx("p",{className:"text-cyber-cyan/70",children:"Space"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white mb-1",children:"Dash:"}),e.jsx("p",{className:"text-cyber-cyan/70",children:"Shift"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white mb-1",children:"Pause:"}),e.jsx("p",{className:"text-cyber-cyan/70",children:"Esc"})]})]})]})},G=v,R=k,L=S,$=({onClose:s})=>(f(),e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"cyber-glass p-6 border border-cyber-cyan/50 max-w-2xl w-full",children:[e.jsx("h2",{className:"text-3xl mb-6 text-cyber-cyan text-glow-cyan",children:"SYSTEM TUTORIAL"}),e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-cyber-yellow mb-2",children:"NODE TYPES"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"cyber-glass p-3 border border-cyber-cyan/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-cyber-cyan/20 border border-cyber-cyan",children:e.jsx("span",{className:"animate-spin",children:"⟳"})}),e.jsx("h4",{className:"text-cyber-cyan",children:"LOOPS"})]}),e.jsxs("p",{className:"text-sm",children:["Navigate to node and press ",e.jsx("span",{className:"text-cyber-yellow",children:"SPACE"})," to hack. Time your hacking when the loop completes its cycle."]})]}),e.jsxs("div",{className:"cyber-glass p-3 border border-cyber-magenta/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-cyber-magenta/20 border border-cyber-magenta",children:e.jsx("span",{className:"text-cyber-magenta",children:"F"})}),e.jsx("h4",{className:"text-cyber-magenta",children:"CONDITIONALS"})]}),e.jsxs("p",{className:"text-sm",children:["Navigate to node and press ",e.jsx("span",{className:"text-cyber-yellow",children:"SPACE"})," to toggle the condition from F to T (true) to complete the hack."]})]}),e.jsxs("div",{className:"cyber-glass p-3 border border-cyber-yellow/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-cyber-yellow/20 border border-cyber-yellow",children:e.jsx("span",{className:"animate-pulse",children:"⦿"})}),e.jsx("h4",{className:"text-cyber-yellow",children:"RECURSION"})]}),e.jsxs("p",{className:"text-sm",children:["These complex nodes require precise timing. Navigate to node and press ",e.jsx("span",{className:"text-cyber-yellow",children:"SPACE"})," during the pulse peak."]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-cyber-cyan mb-2",children:"CONTROLS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Movement:"}),e.jsx("span",{className:"text-cyber-cyan",children:"WASD / Arrow Keys"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Hack Node:"}),e.jsx("span",{className:"text-cyber-cyan",children:"SPACE"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dash:"}),e.jsx("span",{className:"text-cyber-cyan",children:"SHIFT"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pause:"}),e.jsx("span",{className:"text-cyber-cyan",children:"ESC"})]})]})]}),e.jsxs(G,{children:[e.jsxs(R,{className:"text-xl text-cyber-magenta flex items-center gap-2 w-full justify-between",children:["SCORING SYSTEM",e.jsx("span",{className:"text-sm",children:"(Click to expand)"})]}),e.jsx(L,{className:"pt-2",children:e.jsxs("ul",{className:"space-y-1 text-sm list-disc list-inside",children:[e.jsx("li",{children:"+100 points for each hacked node"}),e.jsx("li",{children:"Combo multiplier increases by 0.1x for consecutive hacks"}),e.jsx("li",{children:"-10 points per second of inactivity"}),e.jsx("li",{children:"Unlock higher difficulties with 75%+ efficiency"})]})})]}),e.jsxs("div",{className:"p-3 border border-cyber-yellow/30 bg-cyber-yellow/10",children:[e.jsx("h4",{className:"text-cyber-yellow mb-1",children:"HACKER TIPS"}),e.jsx("p",{className:"text-sm",children:"Stay moving to avoid idle penalties. Use dash ability to quickly move across the grid. Prioritize nodes that match your hacking style."})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(E,{children:e.jsxs(M,{children:[e.jsx(T,{asChild:!0,children:e.jsx(g,{onClick:s,className:"bg-cyber-cyan hover:bg-cyber-cyan/80 text-black px-8",children:"START HACKING"})}),e.jsx(A,{className:"border-cyber-cyan bg-black/80 text-cyber-cyan",children:"Press to close tutorial and begin"})]})})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-cyber-cyan/50",children:"Tutorial can be reviewed at any time from the pause menu."})})]})})),H=()=>{const{state:s,dispatch:r}=f(),{playSfx:t}=N(),[i,x]=u.useState(!1),[o,n]=u.useState(!1),m=c=>{r({type:"START_GAME",difficulty:c}),t("click"),n(!0)},h=(c,d)=>{s.status==="playing"&&(r({type:"MOVE_PLAYER",x:c,y:d}),s.player.x===c&&s.player.y===d&&(r({type:"SOLVE_NODE",x:c,y:d}),t("solve")))};u.useEffect(()=>{const c=d=>{d.key==="Escape"&&s.status==="playing"&&(r({type:"PAUSE_GAME"}),t("click"))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[s.status,r]);const a=()=>{switch(s.status){case"idle":return l();case"playing":return b();case"paused":return y();case"gameOver":return j();default:return l()}},l=()=>{const c=["easy","medium","hard","expert","master"];return e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-3xl mb-8 text-cyber-cyan text-glow-cyan",children:"SELECT DIFFICULTY"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-md mb-8",children:c.map((d,p)=>e.jsx(g,{onClick:()=>m(d),className:`
                py-6
                ${p===0?"bg-emerald-600 hover:bg-emerald-700":""}
                ${p===1?"bg-blue-600 hover:bg-blue-700":""}
                ${p===2?"bg-amber-600 hover:bg-amber-700":""}
                ${p===3?"bg-orange-600 hover:bg-orange-700":""}
                ${p===4?"bg-red-600 hover:bg-red-700":""}
                text-white uppercase
              `,children:d},d))}),e.jsxs(g,{variant:"outline",onClick:()=>x(!i),className:"border-cyber-cyan text-cyber-cyan",children:[i?"Hide":"Show"," Controls"]}),i&&e.jsx(O,{})]})},b=()=>e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(D,{onNodeClick:h}),o&&e.jsx($,{onClose:()=>n(!1)})]}),y=()=>e.jsxs("div",{className:"cyber-glass p-8 border border-cyber-cyan/50 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-3xl mb-6 text-cyber-cyan text-glow-cyan",children:"PAUSED"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{onClick:()=>{r({type:"RESUME_GAME"}),t("click")},className:"w-full bg-cyber-cyan hover:bg-cyber-cyan/80 text-black",children:"Resume Game"}),e.jsx(g,{variant:"outline",onClick:()=>n(!0),className:"w-full border-cyber-yellow text-cyber-yellow",children:"Show Tutorial"}),e.jsx(g,{variant:"outline",onClick:()=>{r({type:"END_GAME"}),t("click")},className:"w-full border-cyber-magenta text-cyber-magenta",children:"Quit Game"})]})]}),j=()=>{const c=Math.min(100,Math.round(s.score/1500*100));return e.jsxs("div",{className:"cyber-glass p-8 border border-cyber-cyan/50 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-3xl mb-2 text-cyber-cyan text-glow-cyan",children:"SYSTEM BREACH TERMINATED"}),e.jsx("p",{className:"mb-6 text-cyber-yellow",children:"Connection lost"}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Difficulty:"}),e.jsx("span",{className:"text-cyber-cyan",children:s.difficulty.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Final Score:"}),e.jsx("span",{className:"text-cyber-magenta",children:Math.floor(s.score)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"High Score:"}),e.jsx("span",{className:"text-cyber-yellow",children:Math.floor(s.highScore)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Efficiency:"}),e.jsxs("span",{className:"text-cyber-cyan",children:[c,"%"]})]})]}),c>=75&&s.difficulty!=="master"&&e.jsx("div",{className:"mb-6 p-3 border border-cyber-yellow/50 bg-cyber-yellow/10",children:e.jsx("p",{className:"text-cyber-yellow",children:"New difficulty tier unlocked!"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{onClick:()=>{r({type:"START_GAME",difficulty:s.difficulty}),t("click")},className:"w-full bg-cyber-cyan hover:bg-cyber-cyan/80 text-black",children:"Play Again"}),e.jsx(g,{variant:"outline",onClick:()=>{r({type:"END_GAME"}),t("click")},className:"w-full border-cyber-magenta text-cyber-magenta",children:"Back to Menu"})]})]})};return e.jsx(C,{hideNavigation:s.status==="playing",children:a()})};export{H as default};
